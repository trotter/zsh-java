export JAVA_VERSIONS_HOME=/Library/Java/JavaVirtualMachines/

function java-versions() {
  for dir in $(find $JAVA_VERSIONS_HOME/* -depth 0 -type d); do
    basename $dir
  done
}

function java-use-version() {
  export JAVA_VERSION=$1
  if [[ "$JAVA_VERSION" == "system" ]]; then
    export JAVA_HOME="/System/Library/Frameworks/JavaVM.framework/Home"
  else
    export JAVA_HOME="/Library/Java/JavaVirtualMachines/$JAVA_VERSION/Contents/Home"
  fi
}

# sort -r ensures we're likely to get the latest version
java-use-version $(java-versions | sort -r | head -1)
